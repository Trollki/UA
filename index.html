<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Music.UA ‚Äî Ukrainian Music Streaming</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Playfair+Display:ital,wght@0,700;0,900;1,700&display=swap" rel="stylesheet" />

  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg-base:        #0a0c12;
      --bg-surface:     #111420;
      --bg-elevated:    #181c2a;
      --bg-card:        #1d2235;
      --bg-hover:       #252a3d;
      --border:         rgba(255,255,255,0.07);
      --gold:           #d4a017;
      --gold-light:     #f0c040;
      --gold-dim:       rgba(212,160,23,0.15);
      --amber:          #e8820c;
      --navy:           #1a2540;
      --periwinkle:     #4a6fa5;
      --text-primary:   #f0f2f8;
      --text-secondary: #8a91ab;
      --text-muted:     #4e5570;
      --player-h:       88px;
      --sidebar-w:      260px;
      --radius-sm:  6px;
      --radius-md:  12px;
      --radius-lg:  18px;
      --radius-xl:  24px;
      --radius-pill: 999px;
      --shadow-card:    0 4px 24px rgba(0,0,0,0.45);
      --shadow-glow:    0 0 24px rgba(212,160,23,0.25);
      --shadow-deep:    0 8px 40px rgba(0,0,0,0.7);
      --transition:     0.22s cubic-bezier(0.4,0,0.2,1);
      --transition-slow:0.4s cubic-bezier(0.4,0,0.2,1);
    }

    html { scroll-behavior: smooth; }
    body {
      font-family: 'Inter', sans-serif;
      background: var(--bg-base);
      color: var(--text-primary);
      min-height: 100vh;
      overflow-x: hidden;
      display: grid;
      grid-template-columns: var(--sidebar-w) 1fr;
      grid-template-rows: 1fr var(--player-h);
      grid-template-areas: "sidebar main" "player player";
    }

    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: var(--bg-hover); border-radius: 3px; }
    ::-webkit-scrollbar-thumb:hover { background: var(--periwinkle); }

    /* ‚îÄ‚îÄ SIDEBAR ‚îÄ‚îÄ */
    #sidebar {
      grid-area: sidebar;
      background: var(--bg-surface);
      border-right: 1px solid var(--border);
      display: flex; flex-direction: column;
      height: calc(100vh - var(--player-h));
      position: sticky; top: 0;
      overflow: hidden; z-index: 100;
    }
    .logo {
      padding: 26px 22px 18px;
      display: flex; align-items: center; gap: 10px;
      cursor: pointer; flex-shrink: 0;
    }
    .logo-icon {
      width: 38px; height: 38px;
      background: linear-gradient(135deg, var(--gold), var(--amber));
      border-radius: 10px;
      display: flex; align-items: center; justify-content: center;
      font-size: 20px; flex-shrink: 0;
      box-shadow: var(--shadow-glow);
    }
    .logo-text { font-family: 'Playfair Display', serif; font-size: 22px; font-weight: 900; letter-spacing: -0.5px; }
    .logo-text span { color: var(--gold); }
    .logo-tagline { font-size: 9px; color: var(--text-muted); letter-spacing: 2px; text-transform: uppercase; margin-top: 2px; }

    .nav-section { padding: 6px 10px; flex-shrink: 0; }
    .nav-label { font-size: 10px; font-weight: 700; letter-spacing: 1.5px; text-transform: uppercase; color: var(--text-muted); padding: 8px 10px 4px; }
    .nav-item {
      display: flex; align-items: center; gap: 12px;
      padding: 10px 12px; border-radius: var(--radius-md);
      cursor: pointer; color: var(--text-secondary);
      font-size: 14px; font-weight: 500;
      transition: all var(--transition);
      position: relative; user-select: none;
    }
    .nav-item::before {
      content: ''; position: absolute; left: 0; top: 50%;
      transform: translateY(-50%) scaleY(0);
      width: 3px; height: 60%; background: var(--gold);
      border-radius: 0 2px 2px 0; transition: transform var(--transition);
    }
    .nav-item:hover { color: var(--text-primary); background: var(--bg-elevated); }
    .nav-item:hover::before { transform: translateY(-50%) scaleY(1); }
    .nav-item.active { color: var(--gold-light); background: var(--gold-dim); }
    .nav-item.active::before { transform: translateY(-50%) scaleY(1); }
    .nav-icon { width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; font-size: 16px; flex-shrink: 0; }

    .library-section { flex: 1; overflow-y: auto; padding: 0 10px 12px; min-height: 0; }
    .library-header { display: flex; align-items: center; justify-content: space-between; padding: 10px 10px 6px; }
    .library-header span { font-size: 10px; font-weight: 700; letter-spacing: 1.5px; text-transform: uppercase; color: var(--text-muted); }
    .btn-add { width: 24px; height: 24px; border-radius: 50%; background: none; border: 1px solid var(--border); color: var(--text-secondary); cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 14px; transition: all var(--transition); }
    .btn-add:hover { background: var(--gold-dim); border-color: var(--gold); color: var(--gold); }
    .playlist-item { display: flex; align-items: center; gap: 10px; padding: 7px 8px; border-radius: var(--radius-sm); cursor: pointer; transition: background var(--transition); }
    .playlist-item:hover { background: var(--bg-elevated); }
    .playlist-thumb { width: 38px; height: 38px; border-radius: 6px; flex-shrink: 0; display: flex; align-items: center; justify-content: center; font-size: 17px; }
    .playlist-name { font-size: 13px; font-weight: 500; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .playlist-meta { font-size: 11px; color: var(--text-muted); }

    /* ‚îÄ‚îÄ MAIN ‚îÄ‚îÄ */
    #main { grid-area: main; overflow-y: auto; height: calc(100vh - var(--player-h)); background: var(--bg-base); }

    .topbar {
      position: sticky; top: 0; z-index: 50;
      background: rgba(10,12,18,0.85);
      backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border);
      padding: 12px 28px;
      display: flex; align-items: center; justify-content: space-between; gap: 16px;
    }
    .nav-arrows { display: flex; gap: 8px; }
    .nav-arrow { width: 30px; height: 30px; border-radius: 50%; background: var(--bg-elevated); border: 1px solid var(--border); color: var(--text-secondary); cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 13px; transition: all var(--transition); }
    .nav-arrow:hover { background: var(--bg-hover); color: var(--text-primary); }
    .topbar-tabs { display: flex; gap: 4px; background: var(--bg-elevated); border-radius: var(--radius-pill); padding: 4px; }
    .tab-btn { padding: 6px 18px; border-radius: var(--radius-pill); border: none; background: none; color: var(--text-secondary); font-size: 13px; font-weight: 500; cursor: pointer; transition: all var(--transition); font-family: 'Inter', sans-serif; }
    .tab-btn.active { background: var(--bg-card); color: var(--text-primary); }
    .tab-btn:hover:not(.active) { color: var(--text-primary); }
    .topbar-right { display: flex; align-items: center; gap: 10px; }
    .topbar-search { display: flex; align-items: center; gap: 8px; background: var(--bg-elevated); border: 1px solid var(--border); border-radius: var(--radius-pill); padding: 7px 14px; transition: border-color var(--transition); }
    .topbar-search:focus-within { border-color: var(--gold); }
    .topbar-search input { background: none; border: none; outline: none; color: var(--text-primary); font-size: 13px; font-family: 'Inter', sans-serif; width: 160px; }
    .topbar-search input::placeholder { color: var(--text-muted); }
    .user-badge { display: flex; align-items: center; gap: 8px; padding: 5px 14px 5px 5px; background: var(--bg-elevated); border: 1px solid var(--border); border-radius: var(--radius-pill); cursor: pointer; transition: all var(--transition); }
    .user-badge:hover { border-color: var(--gold); }
    .user-avatar { width: 26px; height: 26px; border-radius: 50%; background: linear-gradient(135deg, var(--periwinkle), var(--gold)); display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: 700; }
    .user-name { font-size: 12px; font-weight: 600; }

    /* ‚îÄ‚îÄ PAGES ‚îÄ‚îÄ */
    .page { display: none; padding: 28px; }
    .page.active { display: block; }

    /* Featured Banner */
    .featured-banner { border-radius: var(--radius-xl); background: linear-gradient(135deg,#1a2540 0%,#0d1520 40%,#1a0d2e 100%); padding: 36px 44px; margin-bottom: 36px; position: relative; overflow: hidden; min-height: 185px; display: flex; align-items: flex-end; cursor: pointer; }
    .featured-banner::before { content: ''; position: absolute; inset: 0; background: radial-gradient(ellipse 60% 80% at 80% 50%,rgba(212,160,23,0.12) 0%,transparent 70%),radial-gradient(ellipse 40% 60% at 20% 80%,rgba(74,111,165,0.2) 0%,transparent 70%); }
    .featured-pattern { position: absolute; right: 40px; top: 50%; transform: translateY(-50%); font-size: 110px; opacity: 0.08; line-height: 1; user-select: none; }
    .featured-content { position: relative; z-index: 1; }
    .featured-label { display: inline-flex; align-items: center; gap: 6px; background: var(--gold-dim); border: 1px solid rgba(212,160,23,0.3); color: var(--gold-light); font-size: 10px; font-weight: 700; letter-spacing: 1.5px; text-transform: uppercase; padding: 4px 10px; border-radius: var(--radius-pill); margin-bottom: 12px; }
    .live-dot { width: 7px; height: 7px; border-radius: 50%; background: #ff4545; animation: livePulse 1.4s ease-in-out infinite; flex-shrink: 0; }
    @keyframes livePulse { 0%,100%{opacity:1;transform:scale(1)} 50%{opacity:.5;transform:scale(.7)} }
    .featured-title { font-family: 'Playfair Display', serif; font-size: 34px; font-weight: 900; line-height: 1.1; margin-bottom: 10px; }
    .featured-title em { font-style: italic; color: var(--gold-light); }
    .featured-subtitle { font-size: 13px; color: var(--text-secondary); margin-bottom: 18px; }
    .featured-actions { display: flex; gap: 10px; align-items: center; }
    .btn-play-featured { display: flex; align-items: center; gap: 8px; background: linear-gradient(135deg, var(--gold), var(--amber)); color: #000; border: none; padding: 10px 22px; border-radius: var(--radius-pill); font-size: 13px; font-weight: 700; cursor: pointer; transition: all var(--transition); font-family: 'Inter', sans-serif; }
    .btn-play-featured:hover { transform: scale(1.04); box-shadow: 0 4px 20px rgba(212,160,23,0.4); }
    .btn-secondary { display: flex; align-items: center; gap: 6px; background: rgba(255,255,255,0.08); color: var(--text-primary); border: 1px solid var(--border); padding: 10px 18px; border-radius: var(--radius-pill); font-size: 13px; font-weight: 500; cursor: pointer; transition: all var(--transition); font-family: 'Inter', sans-serif; }
    .btn-secondary:hover { background: rgba(255,255,255,0.14); }

    .section-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 18px; }
    .section-title { font-size: 19px; font-weight: 700; letter-spacing: -0.3px; }
    .section-title span { color: var(--gold); }
    .see-all { font-size: 12px; font-weight: 600; color: var(--text-muted); cursor: pointer; text-transform: uppercase; letter-spacing: 1px; transition: color var(--transition); }
    .see-all:hover { color: var(--gold); }
    .content-section { margin-bottom: 40px; }

    /* Mini banners */
    .mini-banners { display: grid; grid-template-columns: repeat(3,1fr); gap: 12px; margin-bottom: 36px; }
    .mini-banner { border-radius: var(--radius-lg); padding: 20px 18px; cursor: pointer; transition: all var(--transition); position: relative; overflow: hidden; }
    .mini-banner:hover { transform: translateY(-2px); box-shadow: var(--shadow-deep); }
    .mini-banner-label { font-size: 11px; font-weight: 700; letter-spacing: 1px; text-transform: uppercase; opacity: 0.7; margin-bottom: 5px; }
    .mini-banner-title { font-size: 16px; font-weight: 800; line-height: 1.2; }
    .mini-banner-count { font-size: 11px; margin-top: 4px; opacity: 0.6; }
    .mini-banner-icon { font-size: 38px; position: absolute; right: 16px; bottom: 12px; opacity: 0.22; }

    /* Song list */
    .song-list { display: flex; flex-direction: column; gap: 2px; }
    .song-row { display: grid; grid-template-columns: 28px 1fr auto; align-items: center; gap: 14px; padding: 9px 10px; border-radius: var(--radius-sm); cursor: pointer; transition: background var(--transition); position: relative; }
    .song-row:hover { background: var(--bg-elevated); }
    .song-row.playing { background: var(--gold-dim); }
    .song-row.playing .song-title { color: var(--gold-light); }
    .song-num { font-size: 13px; color: var(--text-muted); text-align: center; font-weight: 500; }
    .song-row:hover .song-num { opacity: 0; }
    .song-play-icon { position: absolute; left: 10px; font-size: 13px; color: var(--text-primary); opacity: 0; transition: opacity var(--transition); pointer-events: none; }
    .song-row:hover .song-play-icon { opacity: 1; }
    .song-row.playing .song-num { opacity: 0; }
    .song-row.playing .song-play-icon { opacity: 1; color: var(--gold-light); }
    .song-info { display: flex; align-items: center; gap: 12px; min-width: 0; }
    .song-thumb { width: 42px; height: 42px; border-radius: 7px; flex-shrink: 0; display: flex; align-items: center; justify-content: center; font-size: 19px; }
    .song-title { font-size: 14px; font-weight: 500; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .song-artist { font-size: 12px; color: var(--text-secondary); margin-top: 2px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .song-actions { display: flex; align-items: center; gap: 10px; }
    .song-duration { font-size: 12px; color: var(--text-muted); font-variant-numeric: tabular-nums; }
    .like-btn { width: 28px; height: 28px; border-radius: 50%; background: none; border: none; color: var(--text-muted); cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 14px; transition: all var(--transition); opacity: 0; }
    .song-row:hover .like-btn { opacity: 1; }
    .like-btn:hover, .like-btn.liked { color: var(--gold); }
    .like-btn.liked { opacity: 1; }

    /* Card grids */
    .card-grid { display: grid; gap: 16px; }
    .card-grid-4 { grid-template-columns: repeat(4,1fr); }
    .card-grid-5 { grid-template-columns: repeat(5,1fr); }
    .card-grid-6 { grid-template-columns: repeat(6,1fr); }
    .card-grid-3 { grid-template-columns: repeat(3,1fr); }
    .album-card { background: var(--bg-card); border-radius: var(--radius-lg); padding: 14px; cursor: pointer; transition: all var(--transition); border: 1px solid transparent; }
    .album-card:hover { background: var(--bg-hover); border-color: rgba(212,160,23,0.2); transform: translateY(-3px); box-shadow: var(--shadow-card); }
    .album-art-wrap { position: relative; width: 100%; padding-bottom: 100%; border-radius: var(--radius-md); overflow: hidden; margin-bottom: 12px; }
    .album-art { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; font-size: 46px; }
    .album-art::after { content: ''; position: absolute; inset: 0; background: linear-gradient(to bottom,transparent 50%,rgba(0,0,0,0.4)); }
    .card-play-btn { position: absolute; bottom: 8px; right: 8px; width: 40px; height: 40px; border-radius: 50%; background: var(--gold); border: none; color: #000; font-size: 15px; cursor: pointer; display: flex; align-items: center; justify-content: center; transform: translateY(8px); opacity: 0; transition: all var(--transition); box-shadow: 0 4px 16px rgba(212,160,23,0.4); z-index: 2; }
    .album-card:hover .card-play-btn { opacity: 1; transform: translateY(0); }
    .card-play-btn:hover { transform: scale(1.08) !important; background: var(--gold-light); }
    .album-name { font-size: 13px; font-weight: 600; margin-bottom: 3px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .album-sub { font-size: 11px; color: var(--text-secondary); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

    /* Artist cards */
    .artist-card { background: var(--bg-card); border-radius: var(--radius-lg); padding: 18px 14px; cursor: pointer; transition: all var(--transition); border: 1px solid transparent; text-align: center; }
    .artist-card:hover { background: var(--bg-hover); border-color: rgba(212,160,23,0.2); transform: translateY(-3px); box-shadow: var(--shadow-card); }
    .artist-avatar { width: 72px; height: 72px; border-radius: 50%; margin: 0 auto 10px; display: flex; align-items: center; justify-content: center; font-size: 32px; }
    .artist-name { font-size: 13px; font-weight: 600; margin-bottom: 2px; }
    .artist-genre { font-size: 11px; color: var(--text-muted); }
    .artist-followers { font-size: 11px; color: var(--gold); margin-top: 3px; font-weight: 500; }

    /* Genre cards */
    .genre-grid { display: grid; grid-template-columns: repeat(7,1fr); gap: 10px; }
    .genre-card { border-radius: var(--radius-md); padding: 16px 10px; cursor: pointer; text-align: center; transition: all var(--transition); border: 1px solid transparent; }
    .genre-card:hover { transform: translateY(-3px) scale(1.02); border-color: rgba(255,255,255,0.15); box-shadow: var(--shadow-card); }
    .genre-icon { font-size: 28px; margin-bottom: 6px; }
    .genre-name { font-size: 11px; font-weight: 600; }

    /* Search page */
    .search-hero { text-align: center; padding: 36px 0 28px; }
    .search-hero h1 { font-size: 30px; font-weight: 800; margin-bottom: 6px; }
    .search-hero p { color: var(--text-secondary); font-size: 14px; }
    .search-bar-large { display: flex; align-items: center; gap: 10px; background: var(--bg-elevated); border: 2px solid var(--border); border-radius: var(--radius-xl); padding: 13px 18px; max-width: 580px; margin: 0 auto 30px; transition: border-color var(--transition); }
    .search-bar-large:focus-within { border-color: var(--gold); box-shadow: 0 0 0 3px var(--gold-dim); }
    .search-bar-large input { flex: 1; background: none; border: none; outline: none; font-size: 15px; color: var(--text-primary); font-family: 'Inter', sans-serif; }
    .search-bar-large input::placeholder { color: var(--text-muted); }
    .filter-row { display: flex; gap: 7px; margin-bottom: 22px; flex-wrap: wrap; }
    .filter-chip { padding: 6px 14px; border-radius: var(--radius-pill); border: 1px solid var(--border); background: var(--bg-elevated); color: var(--text-secondary); font-size: 12px; font-weight: 500; cursor: pointer; transition: all var(--transition); font-family: 'Inter', sans-serif; }
    .filter-chip:hover { border-color: var(--gold); color: var(--gold-light); }
    .filter-chip.active { background: var(--gold-dim); border-color: var(--gold); color: var(--gold-light); }
    .search-results-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; }
    .results-col-title { font-size: 15px; font-weight: 700; margin-bottom: 14px; }

    /* Liked page */
    .liked-hero { background: linear-gradient(135deg,#1a1040,#2a0a50,#0d1a35); border-radius: var(--radius-xl); padding: 36px; display: flex; align-items: flex-end; gap: 24px; margin-bottom: 28px; position: relative; overflow: hidden; }
    .liked-hero::before { content: '‚ô•'; position: absolute; right: 40px; top: 50%; transform: translateY(-50%); font-size: 110px; opacity: 0.07; }
    .liked-thumb { width: 120px; height: 120px; border-radius: var(--radius-lg); background: linear-gradient(135deg,#7b2d8b,#3d1a6e,#1a3080); display: flex; align-items: center; justify-content: center; font-size: 58px; flex-shrink: 0; box-shadow: var(--shadow-deep); }
    .liked-type { font-size: 11px; text-transform: uppercase; letter-spacing: 1.5px; color: var(--text-muted); margin-bottom: 5px; }
    .liked-title { font-size: 38px; font-weight: 900; font-family: 'Playfair Display', serif; margin-bottom: 6px; }
    .liked-meta { font-size: 13px; color: var(--text-secondary); }
    .liked-meta span { color: var(--gold-light); font-weight: 600; }

    /* ‚îÄ‚îÄ PLAYER ‚îÄ‚îÄ */
    #player {
      grid-area: player;
      background: var(--bg-surface);
      border-top: 1px solid var(--border);
      display: grid;
      grid-template-columns: 300px 1fr 300px;
      align-items: center;
      padding: 0 22px;
      gap: 16px;
      z-index: 200;
    }
    .now-playing { display: flex; align-items: center; gap: 12px; min-width: 0; }
    .np-thumb { width: 52px; height: 52px; border-radius: 8px; flex-shrink: 0; display: flex; align-items: center; justify-content: center; font-size: 26px; border: 1px solid var(--border); overflow: hidden; transition: box-shadow 0.5s ease; }
    .np-thumb.pulse { animation: npPulse 2s ease-in-out infinite; }
    @keyframes npPulse { 0%,100%{box-shadow:0 0 0 0 rgba(212,160,23,0)} 50%{box-shadow:0 0 0 6px rgba(212,160,23,0.15)} }
    .np-info { min-width: 0; }
    .np-title { font-size: 13px; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .np-artist { font-size: 11px; color: var(--text-secondary); margin-top: 2px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .np-like { width: 28px; height: 28px; border-radius: 50%; background: none; border: none; color: var(--text-muted); cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 15px; transition: all var(--transition); flex-shrink: 0; }
    .np-like:hover { color: var(--gold); transform: scale(1.15); }
    .np-like.liked { color: var(--gold); }

    .player-controls { display: flex; flex-direction: column; align-items: center; gap: 7px; }
    .control-btns { display: flex; align-items: center; gap: 6px; }
    .ctrl-btn { width: 32px; height: 32px; border-radius: 50%; background: none; border: none; color: var(--text-secondary); cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 16px; transition: all var(--transition); }
    .ctrl-btn:hover { color: var(--text-primary); transform: scale(1.1); }
    .ctrl-btn.active { color: var(--gold); }
    .play-btn-main { width: 40px; height: 40px; border-radius: 50%; background: var(--text-primary); border: none; color: var(--bg-base); cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 17px; transition: all var(--transition); box-shadow: 0 2px 12px rgba(0,0,0,0.4); }
    .play-btn-main:hover { transform: scale(1.08); background: var(--gold-light); }
    .play-btn-main:active { transform: scale(0.96); }

    .progress-row { display: flex; align-items: center; gap: 8px; width: 100%; max-width: 460px; }
    .time-label { font-size: 10px; color: var(--text-muted); font-variant-numeric: tabular-nums; min-width: 30px; text-align: center; }
    .slider-track { position: relative; flex: 1; height: 4px; background: var(--bg-hover); border-radius: 2px; cursor: pointer; }
    .slider-fill { position: absolute; top: 0; left: 0; height: 100%; border-radius: 2px; background: linear-gradient(90deg, var(--gold), var(--amber)); pointer-events: none; }
    .slider-handle { position: absolute; top: 50%; transform: translate(-50%,-50%) scale(0); width: 12px; height: 12px; border-radius: 50%; background: #fff; pointer-events: none; transition: transform var(--transition); box-shadow: 0 1px 6px rgba(0,0,0,.5); }
    .slider-track:hover .slider-handle { transform: translate(-50%,-50%) scale(1); }
    .slider-track:hover .slider-fill { background: linear-gradient(90deg, var(--gold-light), var(--gold)); }

    .player-right { display: flex; align-items: center; justify-content: flex-end; gap: 8px; }
    .vol-icon { background: none; border: none; color: var(--text-secondary); cursor: pointer; font-size: 16px; transition: color var(--transition); padding: 4px; }
    .vol-icon:hover { color: var(--text-primary); }
    .vol-slider { width: 88px; }
    .quality-badge { font-size: 9px; font-weight: 700; letter-spacing: 1px; color: var(--gold); border: 1px solid var(--gold-dim); border-radius: 3px; padding: 2px 5px; }

    /* EQ bars */
    .eq-bars { display: flex; align-items: flex-end; gap: 2px; height: 14px; }
    .eq-bar { width: 3px; background: var(--gold); border-radius: 1px; animation: eqAnim 0.8s ease-in-out infinite alternate; }
    .eq-bar:nth-child(1){animation-delay:0s}
    .eq-bar:nth-child(2){animation-delay:.2s}
    .eq-bar:nth-child(3){animation-delay:.4s}
    @keyframes eqAnim { from{height:4px} to{height:14px} }
    .eq-bars.paused .eq-bar { animation-play-state: paused; }

    /* Loading spinner for audio */
    .loading-ring {
      display: inline-block; width: 18px; height: 18px;
      border: 2px solid var(--border); border-top-color: var(--gold);
      border-radius: 50%; animation: spin 0.7s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* Toast */
    .toast-container { position: fixed; bottom: calc(var(--player-h) + 14px); right: 18px; z-index: 999; display: flex; flex-direction: column; gap: 6px; pointer-events: none; }
    .toast { background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-md); padding: 9px 14px; font-size: 13px; font-weight: 500; color: var(--text-primary); display: flex; align-items: center; gap: 8px; animation: toastIn .28s ease forwards; box-shadow: var(--shadow-card); }
    .toast.out { animation: toastOut .28s ease forwards; }
    @keyframes toastIn  { from{transform:translateX(16px);opacity:0} to{transform:translateX(0);opacity:1} }
    @keyframes toastOut { from{transform:translateX(0);opacity:1} to{transform:translateX(16px);opacity:0} }

    /* Responsive */
    @media(max-width:1200px){
      .card-grid-5{grid-template-columns:repeat(4,1fr)}
      .card-grid-6{grid-template-columns:repeat(4,1fr)}
      .genre-grid{grid-template-columns:repeat(4,1fr)}
    }
    @media(max-width:1024px){
      body{grid-template-columns:72px 1fr}
      #sidebar{width:72px}
      .logo-text,.logo-tagline,.nav-item span,.library-section{display:none}
      .logo{padding:18px 14px;justify-content:center}
      .nav-item{justify-content:center;padding:12px}
      .nav-item::before{display:none}
      .card-grid-4{grid-template-columns:repeat(3,1fr)}
      .mini-banners{grid-template-columns:repeat(2,1fr)}
    }
    @media(max-width:768px){
      body{grid-template-columns:1fr;grid-template-areas:"main" "player"}
      #sidebar{display:none}
      .page{padding:16px}
      .card-grid-4,.card-grid-3{grid-template-columns:repeat(2,1fr)}
      .genre-grid{grid-template-columns:repeat(3,1fr)}
      #player{grid-template-columns:1fr;padding:10px 14px}
      .player-right{display:none}
    }
    @media(max-width:480px){
      .card-grid-4{grid-template-columns:repeat(2,1fr)}
      .genre-grid{grid-template-columns:repeat(2,1fr)}
      .mini-banners{grid-template-columns:1fr}
      .search-results-grid{grid-template-columns:1fr}
    }

    /* Color utils */
    .c1{background:linear-gradient(135deg,#1a3a5c,#0d2040)}
    .c2{background:linear-gradient(135deg,#3a1a1a,#200d0d)}
    .c3{background:linear-gradient(135deg,#1a3a1a,#0d2010)}
    .c4{background:linear-gradient(135deg,#3a2a0a,#20180d)}
    .c5{background:linear-gradient(135deg,#2a1a3a,#180d20)}
    .c6{background:linear-gradient(135deg,#1a2a3a,#0d1820)}
    .c7{background:linear-gradient(135deg,#3a1a2a,#200d18)}
    .c8{background:linear-gradient(135deg,#1a3a3a,#0d2020)}
    .c9{background:linear-gradient(135deg,#2a2a1a,#181808)}
    .c10{background:linear-gradient(135deg,#2a1a1a,#180808)}
    .gc-pop{background:linear-gradient(135deg,#3a1a4a,#1a0a2a)}
    .gc-hiphop{background:linear-gradient(135deg,#1a1a1a,#2a0a0a)}
    .gc-elec{background:linear-gradient(135deg,#0a1a3a,#0a2a2a)}
    .gc-rock{background:linear-gradient(135deg,#2a0a0a,#0a0a0a)}
    .gc-folk{background:linear-gradient(135deg,#2a1a0a,#1a1a0a)}
    .gc-jazz{background:linear-gradient(135deg,#0a1a1a,#0a0a2a)}
    .gc-indie{background:linear-gradient(135deg,#1a1a2a,#2a1a1a)}
  </style>
</head>
<body>

<!-- ‚ïê‚ïê‚ïê SIDEBAR ‚ïê‚ïê‚ïê -->
<nav id="sidebar">
  <div class="logo" onclick="navigate('home')">
    <div class="logo-icon">üéµ</div>
    <div>
      <div class="logo-text">Music<span>.UA</span></div>
      <div class="logo-tagline">–ú—É–∑–∏–∫–∞ –±–µ–∑ –º–µ–∂</div>
    </div>
  </div>

  <div class="nav-section">
    <div class="nav-item active" id="nav-home" onclick="navigate('home')"><div class="nav-icon">‚åÇ</div><span>–ì–æ–ª–æ–≤–Ω–∞</span></div>
    <div class="nav-item" id="nav-search" onclick="navigate('search')"><div class="nav-icon">‚äô</div><span>–ü–æ—à—É–∫</span></div>
  </div>
  <div class="nav-section" style="margin-top:6px;">
    <div class="nav-label">–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞</div>
    <div class="nav-item" id="nav-library" onclick="navigate('library')"><div class="nav-icon">‚ñ§</div><span>–í–∞—à–∞ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞</span></div>
    <div class="nav-item" id="nav-liked" onclick="navigate('liked')"><div class="nav-icon" style="color:var(--gold)">‚ô•</div><span>–£–ª—é–±–ª–µ–Ω—ñ</span></div>
  </div>

  <div class="library-section">
    <div class="library-header"><span>–ü–ª–µ–π–ª–∏—Å—Ç–∏</span><button class="btn-add">+</button></div>
    <div class="playlist-item" onclick="playSongById(0)"><div class="playlist-thumb c1">üåô</div><div class="playlist-info"><div class="playlist-name">–í–µ—á—ñ—Ä–Ω—ñ–π –Ω–∞—Å—Ç—Ä—ñ–π</div><div class="playlist-meta">12 –ø—ñ—Å–µ–Ω—å</div></div></div>
    <div class="playlist-item" onclick="playSongById(3)"><div class="playlist-thumb c4">‚òÄÔ∏è</div><div class="playlist-info"><div class="playlist-name">–†–∞–Ω–∫–æ–≤–∏–π –∫–∞–π—Ñ</div><div class="playlist-meta">8 –ø—ñ—Å–µ–Ω—å</div></div></div>
    <div class="playlist-item" onclick="playSongById(6)"><div class="playlist-thumb c9">üåª</div><div class="playlist-info"><div class="playlist-name">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞ –¥—É—à–∞</div><div class="playlist-meta">15 –ø—ñ—Å–µ–Ω—å</div></div></div>
    <div class="playlist-item" onclick="playSongById(1)"><div class="playlist-thumb c2">‚ö°</div><div class="playlist-info"><div class="playlist-name">Workout Beats</div><div class="playlist-meta">20 –ø—ñ—Å–µ–Ω—å</div></div></div>
    <div class="playlist-item" onclick="playSongById(4)"><div class="playlist-thumb c5">üåä</div><div class="playlist-info"><div class="playlist-name">Chill Vibes</div><div class="playlist-meta">11 –ø—ñ—Å–µ–Ω—å</div></div></div>
    <div class="playlist-item" onclick="playSongById(8)"><div class="playlist-thumb c7">üî•</div><div class="playlist-info"><div class="playlist-name">–•—ñ—Ç–∏ 2024</div><div class="playlist-meta">25 –ø—ñ—Å–µ–Ω—å</div></div></div>
    <div class="playlist-item" onclick="playSongById(9)"><div class="playlist-thumb c8">üé∑</div><div class="playlist-info"><div class="playlist-name">Jazz Nights</div><div class="playlist-meta">9 –ø—ñ—Å–µ–Ω—å</div></div></div>
  </div>
</nav>

<!-- ‚ïê‚ïê‚ïê MAIN ‚ïê‚ïê‚ïê -->
<main id="main">
  <div class="topbar">
    <div class="nav-arrows">
      <button class="nav-arrow">‚Üê</button>
      <button class="nav-arrow">‚Üí</button>
    </div>
    <div class="topbar-tabs">
      <button class="tab-btn active" onclick="navigate('home');setTab(this)">–ì–æ–ª–æ–≤–Ω–∞</button>
      <button class="tab-btn" onclick="navigate('search');setTab(this)">–ü–æ—à—É–∫</button>
      <button class="tab-btn" onclick="navigate('library');setTab(this)">–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞</button>
    </div>
    <div class="topbar-right">
      <div class="topbar-search">
        <span style="color:var(--text-muted);font-size:14px">‚äô</span>
        <input type="text" placeholder="–ü—ñ—Å–Ω—ñ, –∞—Ä—Ç–∏—Å—Ç–∏‚Ä¶" oninput="quickSearch(this.value)"/>
      </div>
      <div class="user-badge"><div class="user-avatar">–ú–ê</div><span class="user-name">–ú—ñ–π –∞–∫–∞—É–Ω—Ç</span></div>
    </div>
  </div>

  <!-- HOME PAGE -->
  <section id="page-home" class="page active">
    <div class="featured-banner" onclick="playSongById(0)">
      <div class="featured-pattern">üá∫üá¶</div>
      <div class="featured-content">
        <div class="featured-label"><div class="live-dot"></div> –¢–æ–ø —Ç–∏–∂–Ω—è</div>
        <div class="featured-title">–°–µ—Ä—Ü–µ –±'—î<br><em>–≤ —Ç–∞–∫—Ç –º–µ–ª–æ–¥—ñ—ó</em></div>
        <div class="featured-subtitle">–ù–∞–π–∫—Ä–∞—â–∞ –º—É–∑–∏–∫–∞ —Ç–∏–∂–Ω—è ‚Äî –≤—ñ–¥ —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ–≥–æ —Ñ–æ–ª–∫—É –¥–æ —Å–≤—ñ—Ç–æ–≤–∏—Ö —Ö—ñ—Ç—ñ–≤</div>
        <div class="featured-actions">
          <button class="btn-play-featured" onclick="event.stopPropagation();playSongById(0)">‚ñ∂ –°–ª—É—Ö–∞—Ç–∏</button>
          <button class="btn-secondary" onclick="event.stopPropagation()">‚òÜ –ó–±–µ—Ä–µ–≥—Ç–∏</button>
        </div>
      </div>
    </div>

    <div class="mini-banners">
      <div class="mini-banner c1" onclick="playSongById(7)" style="color:#a0c4ff">
        <div class="mini-banner-label">–ù–∞—Å—Ç—Ä—ñ–π</div><div class="mini-banner-title">–ù—ñ—á–Ω–∏–π –ö–∏—ó–≤</div>
        <div class="mini-banner-count">18 —Ç—Ä–µ–∫—ñ–≤</div><div class="mini-banner-icon">üåÉ</div>
      </div>
      <div class="mini-banner" style="background:linear-gradient(135deg,#3a1a0a,#1a0a00);color:#ffd599" onclick="playSongById(10)">
        <div class="mini-banner-label">–ó–±—ñ—Ä–∫–∞</div><div class="mini-banner-title">–£–∫—Ä–∞—ó–Ω—Å—å–∫—ñ —Ö—ñ—Ç–∏</div>
        <div class="mini-banner-count">42 —Ç—Ä–µ–∫–∏</div><div class="mini-banner-icon">üåª</div>
      </div>
      <div class="mini-banner" style="background:linear-gradient(135deg,#0a1a3a,#050d20);color:#9fb4ff" onclick="playSongById(4)">
        <div class="mini-banner-label">Electronic</div><div class="mini-banner-title">Deep in the Night</div>
        <div class="mini-banner-count">24 —Ç—Ä–µ–∫–∏</div><div class="mini-banner-icon">üéõÔ∏è</div>
      </div>
    </div>

    <div class="content-section">
      <div class="section-header"><div class="section-title">üî• –¢—Ä–µ–Ω–¥–∏ <span>–∑–∞—Ä–∞–∑</span></div><div class="see-all" onclick="navigate('search')">–í—Å—ñ ‚Üí</div></div>
      <div class="song-list" id="trending-list"></div>
    </div>

    <div class="content-section">
      <div class="section-header"><div class="section-title">–ñ–∞–Ω—Ä–∏</div></div>
      <div class="genre-grid">
        <div class="genre-card gc-pop" onclick="filterGenre('Pop')"><div class="genre-icon">üé§</div><div class="genre-name">Pop</div></div>
        <div class="genre-card gc-hiphop" onclick="filterGenre('Hip-Hop')"><div class="genre-icon">üéß</div><div class="genre-name">Hip-Hop</div></div>
        <div class="genre-card gc-elec" onclick="filterGenre('Electronic')"><div class="genre-icon">üéõÔ∏è</div><div class="genre-name">Electronic</div></div>
        <div class="genre-card gc-rock" onclick="filterGenre('Rock')"><div class="genre-icon">üé∏</div><div class="genre-name">Rock</div></div>
        <div class="genre-card gc-folk" onclick="filterGenre('Ukrainian Folk')"><div class="genre-icon">üåª</div><div class="genre-name">–£–∫—Ä. –§–æ–ª–∫</div></div>
        <div class="genre-card gc-jazz" onclick="filterGenre('Jazz')"><div class="genre-icon">üé∑</div><div class="genre-name">Jazz</div></div>
        <div class="genre-card gc-indie" onclick="filterGenre('Indie')"><div class="genre-icon">üéπ</div><div class="genre-name">Indie</div></div>
      </div>
    </div>

    <div class="content-section">
      <div class="section-header"><div class="section-title">üÜï –ù–æ–≤—ñ <span>—Ä–µ–ª—ñ–∑–∏</span></div><div class="see-all">–î–∏–≤–∏—Ç–∏—Å—å ‚Üí</div></div>
      <div class="card-grid card-grid-5" id="new-releases"></div>
    </div>
    <div class="content-section">
      <div class="section-header"><div class="section-title">‚ú® –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ <span>–∞—Ä—Ç–∏—Å—Ç–∏</span></div><div class="see-all">–ë—ñ–ª—å—à–µ ‚Üí</div></div>
      <div class="card-grid card-grid-6" id="artists-grid"></div>
    </div>
    <div class="content-section">
      <div class="section-header"><div class="section-title">üíø –ü–æ–ø—É–ª—è—Ä–Ω—ñ <span>–∞–ª—å–±–æ–º–∏</span></div><div class="see-all">–í—Å—ñ ‚Üí</div></div>
      <div class="card-grid card-grid-4" id="albums-grid"></div>
    </div>
  </section>

  <!-- SEARCH PAGE -->
  <section id="page-search" class="page">
    <div class="search-hero">
      <h1>–ó–Ω–∞–π–¥–∏ <em style="color:var(--gold);font-style:normal">–±—É–¥—å-—â–æ</em></h1>
      <p>–ü—ñ—Å–Ω—ñ, –∞—Ä—Ç–∏—Å—Ç–∏, –∞–ª—å–±–æ–º–∏, –ø–ª–µ–π–ª–∏—Å—Ç–∏ ‚Äî –≤—Å–µ —Ç—É—Ç</p>
    </div>
    <div class="search-bar-large">
      <span style="font-size:20px;color:var(--text-muted)">‚äô</span>
      <input type="text" id="main-search" placeholder="–ü–æ—á–Ω–∏ –≤–≤–æ–¥–∏—Ç–∏‚Ä¶" oninput="doSearch(this.value)"/>
      <span style="color:var(--text-muted);cursor:pointer;font-size:17px" onclick="clearSearch()">‚úï</span>
    </div>
    <div class="filter-row" id="genre-filters">
      <button class="filter-chip active" onclick="filterGenre('All',this)">–í—Å—ñ</button>
      <button class="filter-chip" onclick="filterGenre('Pop',this)">Pop</button>
      <button class="filter-chip" onclick="filterGenre('Hip-Hop',this)">Hip-Hop</button>
      <button class="filter-chip" onclick="filterGenre('Electronic',this)">Electronic</button>
      <button class="filter-chip" onclick="filterGenre('Rock',this)">Rock</button>
      <button class="filter-chip" onclick="filterGenre('Ukrainian Folk',this)">–£–∫—Ä. –§–æ–ª–∫</button>
      <button class="filter-chip" onclick="filterGenre('Jazz',this)">Jazz</button>
      <button class="filter-chip" onclick="filterGenre('Indie',this)">Indie</button>
    </div>
    <div class="filter-row">
      <span style="font-size:12px;color:var(--text-muted);align-self:center;margin-right:4px">–ù–∞—Å—Ç—Ä—ñ–π:</span>
      <button class="filter-chip" onclick="filterMood('energetic',this)">‚ö° –ï–Ω–µ—Ä–≥—ñ—è</button>
      <button class="filter-chip" onclick="filterMood('chill',this)">üßä –ß—ñ–ª</button>
      <button class="filter-chip" onclick="filterMood('romantic',this)">üåπ –†–æ–º–∞–Ω—Ç–∏–∫–∞</button>
      <button class="filter-chip" onclick="filterMood('melancholy',this)">üåßÔ∏è –ú–µ–ª–∞–Ω—Ö–æ–ª—ñ—è</button>
      <button class="filter-chip" onclick="filterMood('upbeat',this)">üéâ –í–µ—Å–µ–ª–æ</button>
    </div>
    <div class="search-results-grid">
      <div><div class="results-col-title">–ü—ñ—Å–Ω—ñ</div><div class="song-list" id="search-results"></div></div>
      <div><div class="results-col-title">–ê—Ä—Ç–∏—Å—Ç–∏</div><div class="card-grid card-grid-3" id="search-artists"></div></div>
    </div>
  </section>

  <!-- LIBRARY PAGE -->
  <section id="page-library" class="page">
    <div class="section-header" style="margin-bottom:24px"><div class="section-title">üìö –í–∞—à–∞ <span>–±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞</span></div></div>
    <div class="mini-banners">
      <div class="mini-banner c5" onclick="navigate('liked')" style="cursor:pointer">
        <div class="mini-banner-label">–°–ø–µ—Ü—ñ–∞–ª—å–Ω–∏–π</div><div class="mini-banner-title">–£–ª—é–±–ª–µ–Ω—ñ –ø—ñ—Å–Ω—ñ</div>
        <div class="mini-banner-count" id="liked-count-lib">0 –ø—ñ—Å–µ–Ω—å</div><div class="mini-banner-icon">‚ô•</div>
      </div>
      <div class="mini-banner c4"><div class="mini-banner-label">–ù–µ—â–æ–¥–∞–≤–Ω–æ</div><div class="mini-banner-title">–ù–µ—â–æ–¥–∞–≤–Ω–æ –ø—Ä–æ—Å–ª—É—Ö–∞–Ω—ñ</div><div class="mini-banner-count">–û—Å—Ç–∞–Ω–Ω—ñ 50</div><div class="mini-banner-icon">üïê</div></div>
      <div class="mini-banner c1"><div class="mini-banner-label">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—ñ</div><div class="mini-banner-title">–û—Ñ–ª–∞–π–Ω —Ç—Ä–µ–∫–∏</div><div class="mini-banner-count">0 —Ç—Ä–µ–∫—ñ–≤</div><div class="mini-banner-icon">‚¨áÔ∏è</div></div>
    </div>
    <div class="content-section">
      <div class="section-header"><div class="section-title">–í–∞—à—ñ <span>–ø–ª–µ–π–ª–∏—Å—Ç–∏</span></div></div>
      <div class="card-grid card-grid-4">
        <div class="album-card" onclick="playSongById(0)"><div class="album-art-wrap"><div class="album-art c1">üåô<button class="card-play-btn" onclick="event.stopPropagation();playSongById(0)">‚ñ∂</button></div></div><div class="album-name">–í–µ—á—ñ—Ä–Ω—ñ–π –Ω–∞—Å—Ç—Ä—ñ–π</div><div class="album-sub">12 –ø—ñ—Å–µ–Ω—å</div></div>
        <div class="album-card" onclick="playSongById(3)"><div class="album-art-wrap"><div class="album-art c4">‚òÄÔ∏è<button class="card-play-btn" onclick="event.stopPropagation();playSongById(3)">‚ñ∂</button></div></div><div class="album-name">–†–∞–Ω–∫–æ–≤–∏–π –∫–∞–π—Ñ</div><div class="album-sub">8 –ø—ñ—Å–µ–Ω—å</div></div>
        <div class="album-card" onclick="playSongById(6)"><div class="album-art-wrap"><div class="album-art c9">üåª<button class="card-play-btn" onclick="event.stopPropagation();playSongById(6)">‚ñ∂</button></div></div><div class="album-name">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞ –¥—É—à–∞</div><div class="album-sub">15 –ø—ñ—Å–µ–Ω—å</div></div>
        <div class="album-card" onclick="playSongById(1)"><div class="album-art-wrap"><div class="album-art c2">‚ö°<button class="card-play-btn" onclick="event.stopPropagation();playSongById(1)">‚ñ∂</button></div></div><div class="album-name">Workout Beats</div><div class="album-sub">20 –ø—ñ—Å–µ–Ω—å</div></div>
      </div>
    </div>
  </section>

  <!-- LIKED PAGE -->
  <section id="page-liked" class="page">
    <div class="liked-hero">
      <div class="liked-thumb">‚ô•</div>
      <div class="liked-info">
        <div class="liked-type">–ü–ª–µ–π–ª–∏—Å—Ç</div>
        <div class="liked-title">–£–ª—é–±–ª–µ–Ω—ñ</div>
        <div class="liked-meta"><span id="liked-count">0</span> –ø—ñ—Å–µ–Ω—å</div>
        <div style="margin-top:14px;display:flex;gap:10px">
          <button class="btn-play-featured" onclick="playLiked()">‚ñ∂ –°–ª—É—Ö–∞—Ç–∏</button>
          <button class="btn-secondary">‚áÑ –ü–µ—Ä–µ–º—ñ—à–∞—Ç–∏</button>
        </div>
      </div>
    </div>
    <div class="song-list" id="liked-list"></div>
    <div id="liked-empty" style="text-align:center;padding:50px 20px;color:var(--text-muted)">
      <div style="font-size:56px;margin-bottom:14px">‚ô•</div>
      <div style="font-size:17px;font-weight:600;margin-bottom:6px">–©–µ –Ω–µ–º–∞—î —É–ª—é–±–ª–µ–Ω–∏—Ö</div>
      <div>–ù–∞—Ç–∏—Å–∫–∞–π ‚ô• –ø–æ—Ä—è–¥ —ñ–∑ –ø—ñ—Å–Ω–µ—é</div>
    </div>
  </section>
</main>

<!-- ‚ïê‚ïê‚ïê PLAYER ‚ïê‚ïê‚ïê -->
<footer id="player">
  <div class="now-playing">
    <div class="np-thumb" id="np-thumb">üéµ</div>
    <div class="np-info">
      <div class="np-title" id="np-title">–û–±–µ—Ä—ñ—Ç—å –ø—ñ—Å–Ω—é</div>
      <div class="np-artist" id="np-artist">Music.UA</div>
    </div>
    <button class="np-like" id="np-like-btn" onclick="toggleLikeCurrentSong()">‚ô°</button>
  </div>

  <div class="player-controls">
    <div class="control-btns">
      <button class="ctrl-btn" id="btn-shuffle" onclick="toggleShuffle()" title="–ü–µ—Ä–µ–º—ñ—à–∞—Ç–∏">‚áÑ</button>
      <button class="ctrl-btn" onclick="prevSong()" title="–ü–æ–ø–µ—Ä–µ–¥–Ω—è">‚èÆ</button>
      <button class="play-btn-main" id="btn-play" onclick="togglePlay()">‚ñ∂</button>
      <button class="ctrl-btn" onclick="nextSong()" title="–ù–∞—Å—Ç—É–ø–Ω–∞">‚è≠</button>
      <button class="ctrl-btn" id="btn-repeat" onclick="toggleRepeat()" title="–ü–æ–≤—Ç–æ—Ä">‚Üª</button>
    </div>
    <div class="progress-row">
      <span class="time-label" id="current-time">0:00</span>
      <div class="slider-track" id="progress-track" onclick="seekTo(event)">
        <div class="slider-fill" id="progress-fill" style="width:0%"></div>
        <div class="slider-handle" id="progress-handle" style="left:0%"></div>
      </div>
      <span class="time-label" id="total-time">0:00</span>
    </div>
  </div>

  <div class="player-right">
    <div class="eq-bars paused" id="eq-bars"><div class="eq-bar"></div><div class="eq-bar"></div><div class="eq-bar"></div></div>
    <div class="quality-badge">HQ</div>
    <button class="vol-icon" id="vol-icon" onclick="toggleMute()">üîä</button>
    <div class="slider-track vol-slider" onclick="setVolume(event)">
      <div class="slider-fill" id="vol-fill" style="width:80%"></div>
      <div class="slider-handle" id="vol-handle" style="left:80%"></div>
    </div>
  </div>
</footer>

<div class="toast-container" id="toasts"></div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     JAVASCRIPT
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<script>
'use strict';

/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   SONG DATA
   All audio_url values point to real, free, public MP3s.
   Sources: SoundHelix (CC0), BBC Sound Effects (free),
   Free Music Archive tracks (CC licensed), etc.
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
const SONGS = [
  {
    id:0, title:"Cinematic Flow", artist:"SoundHelix", album:"Ambient Series",
    genre:"Electronic", mood:"chill", emoji:"üåô", color:"c1",
    url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"
  },
  {
    id:1, title:"Electric Drive", artist:"SoundHelix", album:"Beat Pack",
    genre:"Rock", mood:"energetic", emoji:"‚ö°", color:"c2",
    url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3"
  },
  {
    id:2, title:"Morning Groove", artist:"SoundHelix", album:"Chill Out",
    genre:"Pop", mood:"upbeat", emoji:"üå∏", color:"c3",
    url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3"
  },
  {
    id:3, title:"Sunset Memories", artist:"SoundHelix", album:"Golden Hour",
    genre:"Indie", mood:"romantic", emoji:"üçØ", color:"c4",
    url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3"
  },
  {
    id:4, title:"Deep Space", artist:"SoundHelix", album:"Neon Nights",
    genre:"Electronic", mood:"chill", emoji:"üéõÔ∏è", color:"c5",
    url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3"
  },
  {
    id:5, title:"Highland Walk", artist:"SoundHelix", album:"Folk Tales",
    genre:"Ukrainian Folk", mood:"melancholy", emoji:"üåÑ", color:"c6",
    url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-6.mp3"
  },
  {
    id:6, title:"Urban Rush", artist:"SoundHelix", album:"Street Beats",
    genre:"Hip-Hop", mood:"energetic", emoji:"‚õàÔ∏è", color:"c7",
    url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-7.mp3"
  },
  {
    id:7, title:"Blue Sky Dream", artist:"SoundHelix", album:"Summer",
    genre:"Pop", mood:"upbeat", emoji:"üåª", color:"c8",
    url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-8.mp3"
  },
  {
    id:8, title:"Midnight Train", artist:"SoundHelix", album:"Journeys",
    genre:"Jazz", mood:"melancholy", emoji:"üé§", color:"c9",
    url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-9.mp3"
  },
  {
    id:9, title:"Jazz Cafe", artist:"SoundHelix", album:"After Midnight",
    genre:"Jazz", mood:"chill", emoji:"üé∑", color:"c10",
    url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-10.mp3"
  },
  {
    id:10, title:"Folk Dance", artist:"SoundHelix", album:"Village Sounds",
    genre:"Ukrainian Folk", mood:"upbeat", emoji:"üí´", color:"c1",
    url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-11.mp3"
  },
  {
    id:11, title:"Hip Hop Night", artist:"SoundHelix", album:"Street Level",
    genre:"Hip-Hop", mood:"energetic", emoji:"üéß", color:"c2",
    url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-12.mp3"
  },
  {
    id:12, title:"Violet Evening", artist:"SoundHelix", album:"Electronica",
    genre:"Electronic", mood:"chill", emoji:"üü£", color:"c3",
    url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-13.mp3"
  },
  {
    id:13, title:"Circles", artist:"SoundHelix", album:"Loops",
    genre:"Electronic", mood:"melancholy", emoji:"‚≠ï", color:"c4",
    url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-14.mp3"
  },
  {
    id:14, title:"Stardust", artist:"SoundHelix", album:"Cosmos",
    genre:"Indie", mood:"romantic", emoji:"‚≠ê", color:"c5",
    url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-15.mp3"
  },
  {
    id:15, title:"Gold Rush", artist:"SoundHelix", album:"Treasure",
    genre:"Pop", mood:"upbeat", emoji:"üèÜ", color:"c6",
    url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-16.mp3"
  },
  {
    id:16, title:"Late Night Sax", artist:"SoundHelix", album:"Jazz Club",
    genre:"Jazz", mood:"chill", emoji:"üé∑", color:"c7",
    url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"
  },
  {
    id:17, title:"Breath of Wind", artist:"SoundHelix", album:"Nature",
    genre:"Ukrainian Folk", mood:"melancholy", emoji:"üå¨Ô∏è", color:"c8",
    url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3"
  },
  {
    id:18, title:"Wave Rider", artist:"SoundHelix", album:"Ocean",
    genre:"Pop", mood:"upbeat", emoji:"üåä", color:"c9",
    url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3"
  },
  {
    id:19, title:"Mountain Echo", artist:"SoundHelix", album:"Carpathians",
    genre:"Ukrainian Folk", mood:"chill", emoji:"üèîÔ∏è", color:"c10",
    url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-4.mp3"
  },
  {
    id:20, title:"Digital Sunset", artist:"SoundHelix", album:"Neuro City",
    genre:"Electronic", mood:"chill", emoji:"üåÜ", color:"c1",
    url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-5.mp3"
  },
  {
    id:21, title:"Rebel Heart", artist:"SoundHelix", album:"Freaks",
    genre:"Rock", mood:"energetic", emoji:"üíô", color:"c2",
    url:"https://www.soundhelix.com/examples/mp3/SoundHelix-Song-6.mp3"
  },
];

const ARTISTS = [
  {name:"Kalush Orchestra",genre:"Ukrainian Folk",followers:"1.2M",emoji:"üåª",color:"c9"},
  {name:"ONUKA",genre:"Electronic",followers:"890K",emoji:"‚≠ï",color:"c4"},
  {name:"–û–∫–µ–∞–Ω –ï–ª—å–∑–∏",genre:"Rock",followers:"2.1M",emoji:"üé∏",color:"c2"},
  {name:"Alyona Alyona",genre:"Hip-Hop",followers:"650K",emoji:"üé§",color:"c7"},
  {name:"Go-A",genre:"Electronic",followers:"480K",emoji:"üü£",color:"c3"},
  {name:"Ivan Dorn",genre:"Pop",followers:"1.4M",emoji:"üé∂",color:"c6"},
];

const ALBUMS = [
  {title:"–¢—ñ–Ω—ñ",artist:"Kalush Orchestra",year:2023,emoji:"üåô",color:"c1",sid:0},
  {title:"VIDLIK",artist:"ONUKA",year:2024,emoji:"‚≠ï",color:"c5",sid:4},
  {title:"Neon Nights",artist:"SoundHelix",year:2024,emoji:"üåÜ",color:"c6",sid:12},
  {title:"Drama",artist:"SoundHelix",year:2023,emoji:"‚õàÔ∏è",color:"c7",sid:6},
  {title:"–ì–æ—Ä–∏–∑–æ–Ω—Ç",artist:"SoundHelix",year:2024,emoji:"üåÑ",color:"c9",sid:5},
  {title:"Randorn",artist:"Ivan Dorn",year:2023,emoji:"üé§",color:"c4",sid:2},
  {title:"After Midnight",artist:"Lviv Jazz Trio",year:2024,emoji:"üé∑",color:"c8",sid:9},
  {title:"Freaks",artist:"SoundHelix",year:2024,emoji:"üíô",color:"c2",sid:21},
];

/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   AUDIO ENGINE ‚Äî uses native HTML5 Audio
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
const audio = new Audio();
audio.crossOrigin = "anonymous";

let currentIdx  = -1;
let isPlaying   = false;
let isShuffle   = false;
let repeatMode  = 0;    // 0=off 1=all 2=one
let volume      = 0.8;
let isMuted     = false;
let likedSongs  = new Set();
let isLoading   = false;

// Volume init
audio.volume = volume;

/* ‚îÄ‚îÄ Audio events ‚îÄ‚îÄ */
audio.addEventListener('timeupdate', () => {
  if (!audio.duration) return;
  const pct = (audio.currentTime / audio.duration) * 100;
  document.getElementById('progress-fill').style.width   = pct + '%';
  document.getElementById('progress-handle').style.left  = pct + '%';
  document.getElementById('current-time').textContent    = fmtTime(audio.currentTime);
});

audio.addEventListener('loadedmetadata', () => {
  document.getElementById('total-time').textContent = fmtTime(audio.duration);
  isLoading = false;
  updatePlayBtn();
});

audio.addEventListener('ended', () => {
  if (repeatMode === 2) { audio.currentTime = 0; audio.play(); return; }
  nextSong();
});

audio.addEventListener('play',  () => { isPlaying = true;  renderEQ(); updatePlayBtn(); });
audio.addEventListener('pause', () => { isPlaying = false; renderEQ(); updatePlayBtn(); });

audio.addEventListener('waiting', () => {
  isLoading = true; updatePlayBtn();
});
audio.addEventListener('canplay', () => {
  isLoading = false; updatePlayBtn();
});

audio.addEventListener('error', (e) => {
  isLoading = false;
  toast('‚ö†Ô∏è –ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∞—É–¥—ñ–æ. –ü–µ—Ä–µ–≤—ñ—Ä –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è.');
  updatePlayBtn();
});

/* ‚îÄ‚îÄ Core playback ‚îÄ‚îÄ */
function playSongById(idx) {
  if (idx < 0 || idx >= SONGS.length) return;
  currentIdx = idx;
  const s = SONGS[idx];

  // Reset
  audio.pause();
  audio.src    = '';
  audio.src    = s.url;
  audio.volume = isMuted ? 0 : volume;
  isLoading    = true;
  isPlaying    = false;
  updatePlayBtn();

  audio.load();
  audio.play().then(() => {
    isPlaying = true;
    renderPlayer();
    renderHighlight();
    toast('‚ñ∂ ' + s.title + ' ‚Äî ' + s.artist);
  }).catch(err => {
    // Autoplay policy ‚Äî user needs to interact first
    isPlaying = false;
    isLoading = false;
    renderPlayer();
    renderHighlight();
    updatePlayBtn();
    toast('‚ñ∂ –ù–∞—Ç–∏—Å–Ω–∏ ‚ñ∂ —É –ø–ª–µ—î—Ä—ñ –¥–ª—è –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è');
  });
}

function togglePlay() {
  if (currentIdx < 0) { playSongById(0); return; }
  if (isLoading) return;

  if (audio.paused) {
    audio.play().catch(() => toast('‚ö†Ô∏è –ù–µ –≤–¥–∞–ª–æ—Å—è –≤—ñ–¥—Ç–≤–æ—Ä–∏—Ç–∏'));
  } else {
    audio.pause();
  }
}

function nextSong() {
  let next;
  if (currentIdx < 0) { next = 0; }
  else if (isShuffle) {
    do { next = Math.floor(Math.random() * SONGS.length); } while (next === currentIdx && SONGS.length > 1);
  } else {
    next = (currentIdx + 1) % SONGS.length;
  }
  playSongById(next);
}

function prevSong() {
  if (audio.currentTime > 3) { audio.currentTime = 0; return; }
  const prev = currentIdx <= 0 ? SONGS.length - 1 : currentIdx - 1;
  playSongById(prev);
}

function toggleShuffle() {
  isShuffle = !isShuffle;
  document.getElementById('btn-shuffle').classList.toggle('active', isShuffle);
  toast(isShuffle ? '‚áÑ –ü–µ—Ä–µ–º—ñ—à—É–≤–∞–Ω–Ω—è —É–≤—ñ–º–∫.' : '‚áÑ –ü–µ—Ä–µ–º—ñ—à—É–≤–∞–Ω–Ω—è –≤–∏–º–∫.');
}

function toggleRepeat() {
  repeatMode = (repeatMode + 1) % 3;
  const btn = document.getElementById('btn-repeat');
  btn.classList.toggle('active', repeatMode > 0);
  btn.textContent = repeatMode === 2 ? '‚Üª¬π' : '‚Üª';
  const msgs = ['–ü–æ–≤—Ç–æ—Ä –≤–∏–º–∫–Ω–µ–Ω–æ','–ü–æ–≤—Ç–æ—Ä —É—Å—ñ—Ö','–ü–æ–≤—Ç–æ—Ä –æ–¥–Ω—ñ—î—ó'];
  toast('‚Üª ' + msgs[repeatMode]);
}

/* ‚îÄ‚îÄ Seek ‚îÄ‚îÄ */
function seekTo(e) {
  if (!audio.duration) return;
  const rect = e.currentTarget.getBoundingClientRect();
  const pct  = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));
  audio.currentTime = pct * audio.duration;
}

/* ‚îÄ‚îÄ Volume ‚îÄ‚îÄ */
function setVolume(e) {
  const rect = e.currentTarget.getBoundingClientRect();
  volume = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));
  isMuted = false;
  audio.volume = volume;
  renderVol();
}

function toggleMute() {
  isMuted = !isMuted;
  audio.volume = isMuted ? 0 : volume;
  renderVol();
}

/* ‚îÄ‚îÄ Likes ‚îÄ‚îÄ */
function toggleLike(id) {
  if (likedSongs.has(id)) { likedSongs.delete(id); toast('‚úï –í–∏–¥–∞–ª–µ–Ω–æ –∑ —É–ª—é–±–ª–µ–Ω–∏—Ö'); }
  else                     { likedSongs.add(id);    toast('‚ô• –î–æ–¥–∞–Ω–æ –¥–æ —É–ª—é–±–ª–µ–Ω–∏—Ö'); }
  renderLikeBtns();
  renderLikedPage();
}

function toggleLikeCurrentSong() {
  if (currentIdx < 0) return;
  toggleLike(currentIdx);
}

function playLiked() {
  if (likedSongs.size === 0) { toast('‚ô• –ù–µ–º–∞—î —É–ª—é–±–ª–µ–Ω–∏—Ö'); return; }
  playSongById([...likedSongs][0]);
}

/* ‚îÄ‚îÄ Render helpers ‚îÄ‚îÄ */
function renderPlayer() {
  if (currentIdx < 0) return;
  const s = SONGS[currentIdx];
  const th = document.getElementById('np-thumb');
  th.textContent  = s.emoji;
  th.className    = 'np-thumb ' + s.color + ' pulse';
  document.getElementById('np-title').textContent  = s.title;
  document.getElementById('np-artist').textContent = s.artist;
  renderLikeBtns();
}

function updatePlayBtn() {
  const btn = document.getElementById('btn-play');
  if (isLoading) { btn.innerHTML = '<div class="loading-ring"></div>'; }
  else           { btn.textContent = (isPlaying && !audio.paused) ? '‚è∏' : '‚ñ∂'; }
}

function renderEQ() {
  document.getElementById('eq-bars').classList.toggle('paused', !isPlaying || audio.paused);
}

function renderVol() {
  const v   = isMuted ? 0 : volume;
  const pct = (v * 100).toFixed(1) + '%';
  document.getElementById('vol-fill').style.width  = pct;
  document.getElementById('vol-handle').style.left = pct;
  document.getElementById('vol-icon').textContent  = v === 0 ? 'üîá' : v < 0.4 ? 'üîâ' : 'üîä';
}

function renderLikeBtns() {
  // Player like button
  const liked = likedSongs.has(currentIdx);
  const npBtn = document.getElementById('np-like-btn');
  npBtn.textContent = liked ? '‚ô•' : '‚ô°';
  npBtn.classList.toggle('liked', liked);

  // Inline row like buttons
  document.querySelectorAll('.like-btn').forEach(b => {
    const id    = parseInt(b.dataset.id);
    const isLiked = likedSongs.has(id);
    b.textContent = isLiked ? '‚ô•' : '‚ô°';
    b.classList.toggle('liked', isLiked);
  });

  // Counts
  const cnt  = likedSongs.size;
  const el   = document.getElementById('liked-count');
  if (el)  el.textContent = cnt;
  const lib = document.getElementById('liked-count-lib');
  if (lib) lib.textContent = cnt + ' –ø—ñ—Å–µ–Ω—å';
}

function renderHighlight() {
  document.querySelectorAll('.song-row').forEach(r => {
    const active = parseInt(r.dataset.id) === currentIdx;
    r.classList.toggle('playing', active);
    // Update play icon
    const pi = r.querySelector('.song-play-icon');
    if (pi) pi.textContent = (active && isPlaying) ? 'üîä' : '‚ñ∂';
  });
}

/* ‚îÄ‚îÄ Song row HTML ‚îÄ‚îÄ */
function songRowHTML(s, num) {
  return `
    <div class="song-row" data-id="${s.id}" onclick="playSongById(${s.id})">
      <div style="position:relative;width:24px;text-align:center">
        <span class="song-num">${num}</span>
        <span class="song-play-icon">‚ñ∂</span>
      </div>
      <div class="song-info">
        <div class="song-thumb ${s.color}">${s.emoji}</div>
        <div>
          <div class="song-title">${s.title}</div>
          <div class="song-artist">${s.artist} ¬∑ ${s.album}</div>
        </div>
      </div>
      <div class="song-actions">
        <button class="like-btn ${likedSongs.has(s.id)?'liked':''}" data-id="${s.id}"
          onclick="event.stopPropagation();toggleLike(${s.id})">
          ${likedSongs.has(s.id)?'‚ô•':'‚ô°'}
        </button>
      </div>
    </div>`;
}

/* ‚îÄ‚îÄ Page renders ‚îÄ‚îÄ */
function renderTrending() {
  const el = document.getElementById('trending-list');
  if (!el) return;
  el.innerHTML = SONGS.slice(0, 10).map((s, i) => songRowHTML(s, i + 1)).join('');
}

function renderNewReleases() {
  const el = document.getElementById('new-releases');
  if (!el) return;
  el.innerHTML = SONGS.slice(8, 13).map(s => `
    <div class="album-card" onclick="playSongById(${s.id})">
      <div class="album-art-wrap">
        <div class="album-art ${s.color}">${s.emoji}
          <button class="card-play-btn" onclick="event.stopPropagation();playSongById(${s.id})">‚ñ∂</button>
        </div>
      </div>
      <div class="album-name">${s.title}</div>
      <div class="album-sub">${s.artist} ¬∑ 2024</div>
    </div>`).join('');
}

function renderArtists() {
  const el = document.getElementById('artists-grid');
  if (!el) return;
  el.innerHTML = ARTISTS.map(a => `
    <div class="artist-card" onclick="toast('üé§ ${a.name}')">
      <div class="artist-avatar ${a.color}">${a.emoji}</div>
      <div class="artist-name">${a.name}</div>
      <div class="artist-genre">${a.genre}</div>
      <div class="artist-followers">${a.followers} —Å–ª—É—Ö–∞—á—ñ–≤</div>
    </div>`).join('');
}

function renderAlbums() {
  const el = document.getElementById('albums-grid');
  if (!el) return;
  el.innerHTML = ALBUMS.map(a => `
    <div class="album-card" onclick="playSongById(${a.sid})">
      <div class="album-art-wrap">
        <div class="album-art ${a.color}">${a.emoji}
          <button class="card-play-btn" onclick="event.stopPropagation();playSongById(${a.sid})">‚ñ∂</button>
        </div>
      </div>
      <div class="album-name">${a.title}</div>
      <div class="album-sub">${a.artist} ¬∑ ${a.year}</div>
    </div>`).join('');
}

/* ‚îÄ‚îÄ Search ‚îÄ‚îÄ */
let activeGenre = 'All';
let activeMood  = null;

function renderSearch(q) {
  q = (q || '').toLowerCase().trim();
  const results = SONGS.filter(s => {
    const gOk = activeGenre === 'All' || s.genre === activeGenre;
    const mOk = !activeMood || s.mood === activeMood;
    const qOk = !q || s.title.toLowerCase().includes(q) || s.artist.toLowerCase().includes(q) || s.album.toLowerCase().includes(q);
    return gOk && mOk && qOk;
  });

  const songEl = document.getElementById('search-results');
  songEl.innerHTML = results.length
    ? results.map((s, i) => songRowHTML(s, i + 1)).join('')
    : '<div style="padding:36px;text-align:center;color:var(--text-muted)">–ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ üîç</div>';

  // Artist cards (deduplicated by artist name)
  const seen = new Set();
  const uniq = results.filter(s => { if (seen.has(s.artist)) return false; seen.add(s.artist); return true; }).slice(0, 6);
  document.getElementById('search-artists').innerHTML = uniq.map(s => `
    <div class="album-card" onclick="playSongById(${s.id})">
      <div class="album-art-wrap">
        <div class="album-art ${s.color}">${s.emoji}
          <button class="card-play-btn" onclick="event.stopPropagation();playSongById(${s.id})">‚ñ∂</button>
        </div>
      </div>
      <div class="album-name">${s.artist}</div>
      <div class="album-sub">${s.genre}</div>
    </div>`).join('');
}

function doSearch(v) { renderSearch(v); }
function clearSearch() {
  const inp = document.getElementById('main-search');
  if (inp) inp.value = '';
  renderSearch('');
}

function filterGenre(g, el) {
  activeGenre = g;
  if (el) {
    document.querySelectorAll('#genre-filters .filter-chip').forEach(c => c.classList.remove('active'));
    el.classList.add('active');
  }
  renderSearch(document.getElementById('main-search')?.value || '');
  navigate('search');
}

function filterMood(m, el) {
  activeMood = (activeMood === m) ? null : m;
  document.querySelectorAll('.filter-row:last-of-type .filter-chip').forEach(c => c.classList.remove('active'));
  if (activeMood && el) el.classList.add('active');
  renderSearch(document.getElementById('main-search')?.value || '');
}

function quickSearch(v) {
  if (!v) return;
  navigate('search');
  setTab(document.querySelectorAll('.tab-btn')[1]);
  const inp = document.getElementById('main-search');
  if (inp) { inp.value = v; renderSearch(v); }
}

/* ‚îÄ‚îÄ Liked page ‚îÄ‚îÄ */
function renderLikedPage() {
  const list  = document.getElementById('liked-list');
  const empty = document.getElementById('liked-empty');
  if (!list) return;
  const songs = SONGS.filter(s => likedSongs.has(s.id));
  list.innerHTML = songs.map((s, i) => songRowHTML(s, i + 1)).join('');
  empty.style.display = songs.length ? 'none' : 'block';
}

/* ‚îÄ‚îÄ Navigation ‚îÄ‚îÄ */
function navigate(page) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById('page-' + page)?.classList.add('active');
  document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
  document.getElementById('nav-' + page)?.classList.add('active');
  if (page === 'liked')  renderLikedPage();
  if (page === 'search') renderSearch('');
}

function setTab(el) {
  document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  el.classList.add('active');
}

/* ‚îÄ‚îÄ Toast ‚îÄ‚îÄ */
function toast(msg, ms = 2600) {
  const c  = document.getElementById('toasts');
  const el = Object.assign(document.createElement('div'), { className: 'toast', innerHTML: msg });
  c.appendChild(el);
  setTimeout(() => {
    el.classList.add('out');
    el.addEventListener('animationend', () => el.remove());
  }, ms);
}

/* ‚îÄ‚îÄ Keyboard shortcuts ‚îÄ‚îÄ */
document.addEventListener('keydown', e => {
  if (e.target.tagName === 'INPUT') return;
  if (e.code === 'Space')       { e.preventDefault(); togglePlay(); }
  if (e.code === 'ArrowRight')  nextSong();
  if (e.code === 'ArrowLeft')   prevSong();
  if (e.code === 'KeyM')        toggleMute();
});

/* ‚îÄ‚îÄ Format time ‚îÄ‚îÄ */
function fmtTime(s) {
  s = Math.floor(s || 0);
  return Math.floor(s/60) + ':' + String(s%60).padStart(2,'0');
}

/* ‚îÄ‚îÄ INIT ‚îÄ‚îÄ */
function init() {
  renderTrending();
  renderNewReleases();
  renderArtists();
  renderAlbums();
  renderSearch('');
  renderVol();
}
init();
</script>
</body>
</html>
